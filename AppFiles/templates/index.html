<!DOCTYPE html>
<html>
<head>
    <title>Gene Expression Upload</title>
</head>
<body>
    <h1>Upload Gene Expression Data</h1>
    
    <form action="/add" method="post" enctype="multipart/form-data">
        <label for="datafile">Expression Matrix (tab-delimited):</label><br>
        <input type="file" name="datafile" accept=".txt,.tsv" required><br><br>

        <label for="groupfile">Sample Group Assignments (tab-delimited):</label><br>
        <input type="file" name="groupfile" accept=".txt,.tsv" required><br><br>

        <input type="submit" value="Upload">
    </form>

    {% if calculation %}
        <h2>Result:</h2>
        <p>{{ calculation }}</p>
    {% endif %}

    <form action="/predict" method="post">
        <input type="submit" value="Run Model on Uploaded Data">
    </form>
    
    {% if predictions %}
        <h2>Predictions</h2>
        <ul>
            {% for row in predictions %}
                <li>
                    <strong>{{ row.sample }} â†’ {{ row.prediction }}</strong><br>
                    Softmax Vector: [
                    {% for prob in row.probabilities %}
                        {{ "%.2e"|format(prob) }}{% if not loop.last %}, {% endif %}
                    {% endfor %}
]
                </li>
            {% endfor %}
        </ul>
    {% endif %}

</body>
</html>

